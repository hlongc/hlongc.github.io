<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>hlongc(前端)</title>
  <icon>https://www.gravatar.com/avatar/4a28f1d414c7c5fecf8a439bf27be8d5</icon>
  
  <link href="https://github.com/hlongc/atom.xml" rel="self"/>
  
  <link href="https://github.com/hlongc/"/>
  <updated>2022-01-05T15:04:56.035Z</updated>
  <id>https://github.com/hlongc/</id>
  
  <author>
    <name>hlongc</name>
    <email>hulc_it@163.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>双向链表实现LRU算法</title>
    <link href="https://github.com/hlongc/2022/01/05/lru/"/>
    <id>https://github.com/hlongc/2022/01/05/lru/</id>
    <published>2022-01-05T14:42:31.000Z</published>
    <updated>2022-01-05T15:04:56.035Z</updated>
    
    <content type="html"><![CDATA[<h3 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h3><p><a href="https://baike.baidu.com/item/LRU/1269842?fr=aladdin" target="_blank">LRU</a>是Least Recently Used的缩写，即最近最少使用，算法根据数据的历史访问记录来进行淘汰数据，其核心思想是“如果数据最近被访问过，那么将来被访问的几率也更高”。</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><pre><code>- 新数据插入到链表头部- 每当缓存命中（即缓存数据被访问），则将数据移到链表头部- 当链表满的时候，将链表尾部的数据丢弃</code></pre><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><pre><code>- 命中时需要遍历链表，找到命中的数据块索引，然后需要将数据移到头部，时间复杂度较高</code></pre><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>vue中的<a href="https://github.com/vuejs/vue/blob/dev/src/core/components/keep-alive.js#L43">keep-alive</a>组件就用到了该思想，该组件是一个抽象组件，对包裹的组件进行缓存，避免了常用组件频繁的创建和销毁，该组件有个属性max，用来设置缓存的最大数量，当组件A被激活时会触发该组件的<a href="https://cn.vuejs.org/v2/api/#activated" target="_blank" rel="noopener">activated</a>钩子函数，当切换到其他组件时，A组件的<a href="https://cn.vuejs.org/v2/api/#deactivated" target="_blank" rel="noopener">deactivated</a>钩子函数会被触发。</p><h3 id="用双向链表实现LRU"><a href="#用双向链表实现LRU" class="headerlink" title="用双向链表实现LRU"></a>用双向链表实现LRU</h3><p>用双向链表+map缓存的方式实现LRU可以做到时间复杂度为O(1)：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(key, value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.key = key;</span><br><span class="line">    <span class="keyword">this</span>.value = value;</span><br><span class="line">    <span class="keyword">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.prev = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(capacity) &#123;</span><br><span class="line">    <span class="keyword">this</span>.capacity = capacity; <span class="comment">// 链表最大长度</span></span><br><span class="line">    <span class="keyword">this</span>.size = <span class="number">0</span>; <span class="comment">// 当前长度</span></span><br><span class="line">    <span class="keyword">this</span>.cache = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">// 映射表</span></span><br><span class="line">    <span class="keyword">this</span>.dummyHead = <span class="keyword">new</span> ListNode(); <span class="comment">// 虚拟头结点</span></span><br><span class="line">    <span class="keyword">this</span>.dummyTail = <span class="keyword">new</span> ListNode(); <span class="comment">// 虚拟尾结点</span></span><br><span class="line">    <span class="keyword">this</span>.dummyHead.next = <span class="keyword">this</span>.dummyTail; <span class="comment">// 后继节点</span></span><br><span class="line">    <span class="keyword">this</span>.dummyTail.prev = <span class="keyword">this</span>.dummyHead; <span class="comment">// 前驱节点</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span>(key) &#123;</span><br><span class="line">    <span class="comment">// 时间复杂度O(1)</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.cache.has(key)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> node = <span class="keyword">this</span>.cache.get(key);</span><br><span class="line">    <span class="keyword">this</span>.moveToHead(node);</span><br><span class="line">    <span class="keyword">return</span> node.value;</span><br><span class="line">  &#125;</span><br><span class="line">  put(key, value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.cache.has(key)) &#123;</span><br><span class="line">      <span class="comment">// 已存在就更新节点值，并且移动到头结点</span></span><br><span class="line">      <span class="keyword">const</span> node = <span class="keyword">this</span>.cache.get(key);</span><br><span class="line">      node.value = value;</span><br><span class="line">      <span class="keyword">this</span>.moveToHead(node);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 不存在就新建节点，也放到头结点</span></span><br><span class="line">      <span class="keyword">const</span> node = <span class="keyword">new</span> ListNode(key, value);</span><br><span class="line">      <span class="keyword">this</span>.size++;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.size &gt; <span class="keyword">this</span>.capacity) &#123;</span><br><span class="line">        <span class="keyword">this</span>.removeTail();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.addToHead(node);</span><br><span class="line">      <span class="keyword">this</span>.cache.set(key, node);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  removeTail() &#123;</span><br><span class="line">    <span class="comment">// 移除尾结点</span></span><br><span class="line">    <span class="keyword">const</span> tail = <span class="keyword">this</span>.dummyTail.prev;</span><br><span class="line">    <span class="keyword">this</span>.removeNodeFromList(tail);</span><br><span class="line">    <span class="keyword">this</span>.size--;</span><br><span class="line">    <span class="keyword">return</span> tail;</span><br><span class="line">  &#125;</span><br><span class="line">  moveToHead(node) &#123;</span><br><span class="line">    <span class="keyword">this</span>.removeNodeFromList(node);</span><br><span class="line">    <span class="keyword">this</span>.addToHead(node);</span><br><span class="line">  &#125;</span><br><span class="line">  removeNodeFromList(node) &#123;</span><br><span class="line">    <span class="keyword">const</span> prev = node.prev;</span><br><span class="line">    <span class="keyword">const</span> next = node.next;</span><br><span class="line">    prev.next = next;</span><br><span class="line">    next.prev = prev;</span><br><span class="line">    <span class="keyword">this</span>.cache.delete(node.key);</span><br><span class="line">  &#125;</span><br><span class="line">  addToHead(node) &#123;</span><br><span class="line">    <span class="keyword">const</span> oldHead = <span class="keyword">this</span>.dummyHead.next;</span><br><span class="line">    <span class="keyword">this</span>.dummyHead.next = node;</span><br><span class="line">    node.prev = <span class="keyword">this</span>.dummyHead;</span><br><span class="line">    node.next = oldHead;</span><br><span class="line">    oldHead.prev = node;</span><br><span class="line">    <span class="keyword">this</span>.cache.set(node.key, node);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lRUCache = <span class="keyword">new</span> LRUCache(<span class="number">2</span>);</span><br><span class="line">lRUCache.put(<span class="string">"a"</span>, <span class="number">1</span>); <span class="comment">// 缓存是 &#123;a=1&#125;</span></span><br><span class="line">lRUCache.put(<span class="string">"a"</span>, <span class="number">2</span>); <span class="comment">// 缓存是 &#123;a=2&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(lRUCache.get(<span class="string">"a"</span>)); <span class="comment">// 返回 2</span></span><br><span class="line">lRUCache.put(<span class="string">"b"</span>, <span class="number">1</span>); <span class="comment">// 缓存是 &#123;b=1, a=2&#125;</span></span><br><span class="line">lRUCache.put(<span class="string">"c"</span>, <span class="number">1</span>); <span class="comment">// &#123; c=1, b=1 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(lRUCache.get(<span class="string">"a"</span>)); <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lRUCache.dummyHead);</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* &lt;ref *2&gt; ListNode &#123;</span></span><br><span class="line"><span class="comment">  key: undefined,</span></span><br><span class="line"><span class="comment">  value: undefined,</span></span><br><span class="line"><span class="comment">  next: &lt;ref *1&gt; ListNode &#123;</span></span><br><span class="line"><span class="comment">    key: 'c',</span></span><br><span class="line"><span class="comment">    value: 1,</span></span><br><span class="line"><span class="comment">    next: ListNode &#123;</span></span><br><span class="line"><span class="comment">      key: 'b',</span></span><br><span class="line"><span class="comment">      value: 1,</span></span><br><span class="line"><span class="comment">      next: [ListNode],</span></span><br><span class="line"><span class="comment">      prev: [Circular *1]</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    prev: [Circular *2]</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  prev: null</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;LRU&quot;&gt;&lt;a href=&quot;#LRU&quot; class=&quot;headerlink&quot; title=&quot;LRU&quot;&gt;&lt;/a&gt;LRU&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://baike.baidu.com/item/LRU/1269842?fr=aladdin&quot; targ</summary>
      
    
    
    
    <category term="算法" scheme="https://github.com/hlongc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="算法" scheme="https://github.com/hlongc/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="链表" scheme="https://github.com/hlongc/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://github.com/hlongc/2022/01/04/hello-world/"/>
    <id>https://github.com/hlongc/2022/01/04/hello-world/</id>
    <published>2022-01-04T13:36:15.553Z</published>
    <updated>2022-01-04T13:36:15.553Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>三数之和</title>
    <link href="https://github.com/hlongc/2021/09/01/3sum/"/>
    <id>https://github.com/hlongc/2021/09/01/3sum/</id>
    <published>2021-09-01T15:07:01.000Z</published>
    <updated>2022-01-04T13:36:15.553Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode-cn.com/problems/3sum/" target="_blank">原题链接</a></p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个包含 n 个整数的数组 <code>nums</code>，判断 <code>nums</code> 中是否存在三个元素 a，b，c ，使得 a + b + c = <code>0</code> ？请你找出所有和为 <code>0</code> 且不重复的三元组。</p><p>注意：答案中不可以包含重复的三元组。</p><blockquote><p>示例 1：<br>输入：nums = [-1,0,1,2,-1,-4]<br>输出：[[-1,-1,2],[-1,0,1]]</p></blockquote><blockquote><p>示例 2：<br>输入：nums = []<br>输出：[]</p></blockquote><blockquote><p>示例 3：<br>输入：nums = [0]<br>输出：[]</p></blockquote><h3 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h3><p>需要在数组中找到三个元素和为<code>0</code>的组合，并且是<code>不重复</code>的三元组，如果不存在则返回空数组，那我们可以对数组进行升序，升序有两个好处:</p><ol><li>方便跳过重复元素(因为寻找的是不重复的三元组)，因为相同的元素都是贴在一起的</li><li>当正在遍历的元素大于0时，那就可以停止遍历了，说明后续的元素都是大于0，已经不符合题意</li></ol><p>在排序完成以后，依次遍历每个元素，假设当前遍历元素为<code>nums[i]</code>，那需要在剩下的右侧元素中找出其余两个元素，对此可以使用双指针进行遍历<code>left = i + 1, right = length - 1</code>，判断<code>num[i] + nums[left] + nums[right] = 0</code>是否满足，如果满足则找到一组，然后根据情况移动双指针。</p><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> threeSum = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    nums.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b) <span class="comment">// 进行升序，方便跳过重复元素</span></span><br><span class="line">    <span class="keyword">const</span> ret = [], len = nums.length</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] &gt; <span class="number">0</span>) <span class="keyword">break</span> <span class="comment">// 当前元素已经大于0，不满足条件</span></span><br><span class="line">        <span class="comment">// 跳过重复元素,可以避免这种情况发生[-1, -1, 0, 1],如果不跳过第二次的-1，那么会有两个重复的结果[[-1, 0, 1], [-1, 0, 1]]不满足题意</span></span><br><span class="line">        <span class="keyword">if</span> (nums[i] === nums[i - <span class="number">1</span>]) <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">const</span> target = -nums[i]</span><br><span class="line">        <span class="keyword">let</span> left = i + <span class="number">1</span>, right = len - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">const</span> sum = nums[left] + nums[right]</span><br><span class="line">            <span class="keyword">if</span> (sum === target) &#123;</span><br><span class="line">                ret.push([nums[i], nums[left], nums[right]])</span><br><span class="line">                <span class="keyword">while</span>(left &lt; right &amp;&amp; nums[left] === nums[left + <span class="number">1</span>]) left++ <span class="comment">// 跳过相同元素，避免结果重复，下面同理</span></span><br><span class="line">                <span class="keyword">while</span>(left &lt; right &amp;&amp; nums[right] === nums[right - <span class="number">1</span>]) right--</span><br><span class="line">                left++</span><br><span class="line">                right--</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 当前值大于目标值说明过大，移动右指针，反之移动左指针</span></span><br><span class="line">                sum &gt; target ? right-- : left++</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/3sum/&quot; target=&quot;_blank&quot;&gt;原题链接&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;题目描述&quot;&gt;&lt;a href=&quot;#题目描述&quot; class=&quot;headerlink&quot; title=&quot;题目描</summary>
      
    
    
    
    <category term="算法" scheme="https://github.com/hlongc/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="算法" scheme="https://github.com/hlongc/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="二分查找" scheme="https://github.com/hlongc/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
    
  </entry>
  
  <entry>
    <title>git撤回已提交到远程的commit信息</title>
    <link href="https://github.com/hlongc/2021/08/31/git-reset/"/>
    <id>https://github.com/hlongc/2021/08/31/git-reset/</id>
    <published>2021-08-31T05:55:24.000Z</published>
    <updated>2022-01-04T13:36:15.553Z</updated>
    
    <content type="html"><![CDATA[<p>场景：不小心把本地调试的代码推送到了远程，现在需要撤回本次commit(红色框)</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/git-reset/remote.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="查看提交的日志信息"><a href="#查看提交的日志信息" class="headerlink" title="查看提交的日志信息"></a>查看提交的日志信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br><span class="line">eab78c1 (HEAD -&gt; master, origin/master) HEAD@&#123;0&#125;: commit: feat: add foo.txt</span><br><span class="line">2ea574d HEAD@&#123;1&#125;: commit (initial): feat: add readme.md</span><br></pre></td></tr></table></figure><p>可以看到<code>eab78c1</code>就是我们要撤回的版本信</p><h3 id="通过hash值在本地进行回退"><a href="#通过hash值在本地进行回退" class="headerlink" title="通过hash值在本地进行回退"></a>通过hash值在本地进行回退</h3><p>通过<code>git reset</code>命令进行回退，该命令后面可以跟参数</p><table><thead><tr><th align="left">参数</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left">–soft</td><td align="left">不删除工作空间的改动代码 ，撤销commit，不撤销git add file</td></tr><tr><td align="left">–hard</td><td align="left">删除工作空间的改动代码，撤销commit且撤销add</td></tr></tbody></table><p>由于我不再需要调试的代码，直接使用<code>--hard</code>选项，并且跟上撤回到指定版本的hash值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard 2ea574d</span><br><span class="line">HEAD is now at 2ea574d feat: add readme.md</span><br></pre></td></tr></table></figure><p>撤回成功以后，再通过<code>git log</code>查看当前的提交日志，可以看到已经回到了第一次提交的状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br><span class="line">commit 2ea574df7af093c927adcdb1a98151e8b8a5ff7f (HEAD -&gt; master)</span><br><span class="line">Author: </span><br><span class="line">Date:   Tue Aug 31 15:04:55 2021 +0800</span><br><span class="line"></span><br><span class="line">    feat: add readme.md</span><br></pre></td></tr></table></figure><h3 id="把撤回以后的结果推送到远程"><a href="#把撤回以后的结果推送到远程" class="headerlink" title="把撤回以后的结果推送到远程"></a>把撤回以后的结果推送到远程</h3><p>如果通过<code>git push origin master</code>推送到远程仓库，会出现报错，因为远程仓库和本地版本不一致</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/git-reset/reject.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>此时可以通过参数<code>--force</code>进行强制覆盖</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/images/git-reset/force.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>最后查看远程仓库的commit信息，可以看到已经回退成功。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;场景：不小心把本地调试的代码推送到了远程，现在需要撤回本次commit(红色框)&lt;/p&gt;
&lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                   </summary>
      
    
    
    
    
    <category term="git" scheme="https://github.com/hlongc/tags/git/"/>
    
  </entry>
  
</feed>
